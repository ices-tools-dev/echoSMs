100  PRINT "MAKE AND READ PDF FISH FILE": REM     'PDF FISH FILE 2/11/84'110  REM     7/23/83. MOD 2/11/84 CSC120  PRINT "FOR SINGLE FISH SCATTERING"130  DIM EF(256),A$(50)140 P$ = "0": REM  INITALIZE HARD COPY TO NO PRINT150 D$ = "": REM  CTRL-D160  PRINT "VALUES OF SONAR SYSTEM PARAMETERS ARE IN PRGM,'WP' GIVES VALUES"170  REM  SONAR SYSTEM PARAMETERS: THESE ARE ESSENTIALLY FIXED SO ENTER IN PRGM.180  REM  SIMRAD 70 KHZ, EY-M190 A$(1) = "SIMRAD 70 HZ;EY - M": REM    A$(1) PRINTS IN MAKE FILE200 I = 1: REM  I IS TEXT INDEX210  REM  SOURCE LEVEL,DB220 SL = 111.5230  REM       RCV TRANSDUCER, RL=-2 DB AT RCV OUTPUT FOR MAX GAIN (GS=10) AND TVG AT FULL GAIN RE 1 VOLT/(1 MICRO BAR)240 RL =  - 2:GS = 10250  REM    DATA FOR EY-M # 20039. GAIN DATA AT GAIN SET =10260  REM    TVG DATA. 40 LOG(R). AT .0014S (1 M) GAIN=-1DB. AT .08 S (60 M) GAIN=70 DB270  REM  TVG DATA. 20 LOG(R). AT .002 S GAIN=33 DB. AT .135 S GAIN=70 DB280  REM  OR TVG "40 LOG(R)+2*A*R"290 A = .25E - 2: REM    ATTEN CONST A=.25 DB/100M :FRESH WATER300  REM  TVG RANGE: 20 LOG(R), 3-100 M+-1DB310  REM  TVG RANGE: 40 LOG(R), 3-60 M =-1DB320 MG = 70: REM     MG IS THE MAXIMUM GAIN AT LIMIT OF TVG ACTION.330 MR = 60: REM  MAX RANGE FOR TVG AT 40*LOG(R)340  REM  USE350  REM    USE TVG GAIN RANGE, G1=-40*LOG(R)+2*A*MR .RCV GAIN (SOUND PRESS TO VOLTS OUT)=RL+G1 DB AT 1 M.360 G1 =  - 40 * .4343 *  LOG (MR) - 2 * A * MR370 TVG = 40380  REM  INSERT R LATER IN NEXT PRGM.390 SF = 70000: REM  SONAR FREQ400 SS = 1458: REM   SOUND SPEED M/S410  REM  TRANSDUCER 70-24-F420 RT = .052: REM  RAD OF TRANSDUCER M430  REM  BEAM ANGLE=11 DEG440  REM  DIRECTIVITY INDEX=24 DB450  REM  INTEGRATED BEAM PSI IS460  REM  10 LOG(PSI)=-16.5 DB470  REM  RAW SYSTEM CALIBRATION490  REM    TAPE RECORDER:MARANTZ PMD360 (OR PMD340), GAIN MASTER:5,LEFT:5,RT:10 GIVES ON LEFT SIG (1983) OUT/IN=TR=.165500  REM     TAPE RECORDER:MARANTZ PMD360 (OR PMD340), GAIN MASTER:5,LEFT:6,RT:10 GIVES ON LEFT SIG (1981) OUT/IN=TR=.233510  REM  PROCESSER GAIN USUALLY PG=32520  REM  E0 IS PEAK AMPLITUDE. DELTA E=1. AMPLITUDE STEPS MS=32.530  REM  INDEX J REPRESENTS AVG AMPL IN RANGE J TO J+1. AMPL IS ABOUT J+.5540  REM      ECHO PROCESSER CALIB: 31.5 IS 10 VOLTS. PV=10/EP550 E0 = 31.5560 EP = 31.5570 DE = 1580 MS = 32590  REM   PC=PV/(TR*PG) ,VOLTS600  REM  SET TR ,PG, PV610 TR = 1: REM  TR = .233: REM   1981 .TR IS DIFFERENT IN LAKE MENDOTA 1981620 PV = 10 / EP630 PG = 32: REM  SETTING FOR LARS DATA.650  PRINT "AFTER DATA IS IN YOU CAN ENTER DESCRIPTION OF DATA. NO ',' OR ':'"660  REM 670  REM  ------ MENU-----------680  REM 690  PRINT " MENU"700  PRINT " INPUT 'FN' TO ENTER FILE NAME"710  PRINT "       'HC' FOR HARD COPY"720  PRINT "       'E' TO ENTER EF(J)"730  PRINT "       'ET' TO ENTER TEXT"740  PRINT "       'CE' TO FIX ECHO DATA"750  PRINT "       'R' TO ENTER RANGE AND NO PINGS"760  PRINT "       'PSP' TO PRINT SONAR PARAMETERS"770  PRINT "       'FSP' TO FIX SONAR PARMETERS"780  PRINT "       'PF' TO PRINT EF(J)"790  PRINT "       'WF' TO WRITE FILE"800  PRINT "       'ROF' TO READ OLD FILE"810  PRINT "       'Q' TO QUIT"820  PRINT "       'M' FOR MENU"830  PRINT "MENU"840  INPUT Q$850  REM 860  REM  ------ MENU CHOICES---870  REM 880  IF Q$ = "FN" THEN 1560890  IF Q$ = "HC" THEN 1390900  IF Q$ = "E" THEN 1660910  IF Q$ = "ET" THEN 2020920  IF Q$ = "CE" THEN 1920930  IF Q$ = "R" THEN 1430940  IF Q$ = "PSP" THEN 1030950  IF Q$ = "FSP" THEN 1240960  IF Q$ = "PF" THEN 1710970  IF Q$ = "WF" THEN 2180980  IF Q$ = "ROF" THEN 2510990  IF Q$ = "Q" THEN 28901000  IF Q$ = "M" THEN 6901010  GOTO 8301020  REM 1030  REM  ------ PRINT SONAR PARAMETERS1040  REM 1050  IF P$ = "HC" THEN  PRINT D$,"PR#1"1060  PRINT "SONAR PARAMETERS"1070  PRINT " SIMRAD EY-M"1080  PRINT "   FREQ =";SF1090  PRINT "   SOUND SPEED=";SS1100  PRINT "   TRANS RADIUS=";RT;" M"1110  PRINT "   SOURCE LEVEL'";SL;" DB, (1MU BAR AT 1 M)"1120  PRINT "   TRNSD-RCV AT FULL TVG=";RL;" DB"1130  PRINT "   RCV GAIN SET=";GS1140  PRINT "   TVG=";TVG;" LOG(R) DB"1150  PRINT "   TVG GAIN CHANGE AT 1 M="; INT (10 * G1 + .5) / 10;" DB"1160  PRINT "   RANGES,R1,R2 = ";R1;",";R2;"M"1165  PRINT "TOTAL NO. PINGS=";MP1170  PRINT "   PROCESSER GAIN=";PG1175  PRINT "   NUMB AMP STEPS=";MS1180  PRINT "   E0=";E01190  PRINT "   DELTA E=";DE1200  PRINT "   TAPE REC.GAIN=";TR1210 P$ = "0": REM   RESET HARD COPY INST.1220  PRINT D$,"PR#0"1230  GOTO 8301240  REM 1250  REM  ------FIX SONAR PARM--1260  REM 1270  PRINT "OLD FREQ=";SF;" NEW=";: INPUT SF1280  PRINT "OLD SOURCE LEV=";SL;" NEW=";: INPUT SL1290  PRINT "OLD RCV LEV=";RL;" NEW=";: INPUT RL1300  PRINT "OLD GAIN SET=";GS;" NEW=";: INPUT GS1305  PRINT "OLD G1=";G1;" NEW=";: INPUT G11310  PRINT "OLD TVG =";TVG;" NEW=";: INPUT TVG1320  PRINT "OLD TAPE REC GAIN=";TR;" NEW=";: INPUT TR1330  PRINT "OLD PROC GAIN=";PG;" NEW=";: INPUT PG1335  PRINT "OLD NUMB AMP STEPS=";MS;" NEW=";: INPUT MS1340  PRINT "OLD E0=";E0;" NEW=";: INPUT E01350  PRINT "OLD SOUND SPEED=";SS;" NEW=";: INPUT SS1360  PRINT "OLD R1,R2=";R1;" ,";R2;" NEW=";: INPUT R1,R21365  PRINT "OLD TRANS RADIUS=";RT;"  INPUT NEW=";: INPUT RT1367  PRINT "OLD NO PINGS=";MP;"  INPUT NEW=";: INPUT MP1370  GOTO 8301380  REM 1390  REM   --- HARD COPY INDICATOR-1400 P$ = "HC"1410  GOTO 8301420  REM 1430  REM   ------ ENTER R1,R2 ----1440  REM 1450  REM 1460  PRINT "ENTER R1,R2=";: INPUT R1,R21480  PRINT "ENTER NO PINGS=";: INPUT MP1520  GOTO 8301530  REM 1540  REM  ------- ENTER FILE NAME1550  REM 1560  PRINT "FILE NAME";: INPUT N$1570 A$(0) = N$1580  GOTO 8301590  REM 1600  REM  ------ ENTER EF(J) ---1610  REM 1620  PRINT 1630  PRINT "J=0 IS SMALLEST AMPLITUDE"1640  PRINT "J=";MS - 1;" IS LARGEST AMPLITUDE"1650  PRINT 1660  FOR J = 0 TO MS - 11670  PRINT J;: INPUT EF(J)1680  NEXT J1685  PRINT "INPUT TOTAL NO. PINGS=";: INPUT MP1690  GOTO 8301700  REM 1710  REM  ------ PRINT FILE ENTRY A$1720  REM  ------  AND EF(J)1730  REM 1740  IF P$ = "HC" THEN  PRINT D$,"PR#1"1750  FOR J = 0 TO I1760  PRINT A$(J)1770  NEXT J1780  PRINT "R1,R2=";R1;",";R2;" NO PINGS=";MP1790  PRINT "J"; TAB( 5);"EF(J)"; TAB( 13);"J"; TAB( 19);"EF(J)"1800 M =  INT (MS / 2 - 1 + .5)1810  FOR J = 0 TO M1820  PRINT J; TAB( 5);EF(J); TAB( 13);M + 1 + J; TAB( 19);EF(M + 1 + J)1830  NEXT J1840 P$ = "0"1850  PRINT D$,"PR#0"1860  GOTO 8301870  REM 1880  REM  ------ CORRECT EF(J)--1890  REM 1900  PRINT 1910  PRINT 1920  PRINT "FIX ENTRY J=";: INPUT J1930  PRINT "PRESENT EF(";J;") =";EF(J)1940  PRINT "NEW EF(";J;")=";: INPUT EF(J)1950  REM 1960  REM  NEW MP1970 MP = 01980  FOR J = 0 TO MS - 11990 MP = MP + EF(J)2000  NEXT J2010  GOTO 8302020  REM 2030  REM  ------ MAKE TEXT ------2040  REM 2050  HOME : TEXT 2060 I = 1: REM  RESET I TO REENTER TEXT2070  PRINT "TYPE ONE STRING AT A TIME-NO',' OR ':'"2080  PRINT "PRESS RETURN ONCE TO END A STRING,TWICE TO QUIT."2090 I = I + 12100  PRINT "I=";I;": ";2110  INPUT "";A$(I)2120  IF A$(I) <  > "" GOTO 20902130  GOTO 8302140  REM 2150  REM  ------- WRITE FILE---2160  REM 2170  REM  WRITE THE FILE ON DISK 1 OR 22180  PRINT "WRITE FILE"2190  PRINT "   ON FLOPPY '1' OR '2' ";: INPUT F$2200  REM   CLEAN FILE N$ THEN WRITE IT                                2210  PRINT D$;"OPEN";N$;",D";F$2220  PRINT D$;"DELETE";N$: PRINT D$;"OPEN";N$2230  PRINT D$;"WRITE";N$2240  PRINT SF: REM  SONAR FREQ2250  PRINT SS: REM  SOUND SPEED2260  PRINT RT: REM  RAD TRNSDUCER2270  PRINT R1: REM  RANGES R1 ,R22280  PRINT R22290  PRINT MP: REM  NO OF PINGS2300  PRINT E0: REM  MAX RAW ECHO PROC AMP2310  PRINT DE: REM  DELTA E2320  PRINT MS: REM  NO AMP BINS2330  PRINT GS: REM  SONAR GAIN SET2340  PRINT SL: REM  SOURCE LEVEL2350  PRINT RL: REM  RCV TRNS LEVEL2360  PRINT TVG: REM  TVG 40 OR 202370  PRINT MR: REM  MAX TVG RANGE2380  PRINT G1: REM  GAIN AT 1 M2390  PRINT PG: REM  PROCESSOR GAIN2400  PRINT PV: REM  PROC VOLT CALIB2410  PRINT TR: REM  TAPE REC GAIN2420  FOR J = 0 TO MS - 12430  PRINT EF(J)2440  NEXT J2450  PRINT I2460  FOR J = 0 TO I - 12470  PRINT A$(J)2480  NEXT J2490  PRINT D$;"CLOSE";N$2500  GOTO 8302510  REM 2520  REM  --- READ OLD FISH ECHO FILE2530  REM 2540  REM  ENTER DATA2550  REM    READ THE FILE ON DISK 1 OR 22560  PRINT " READ FILE NAMED";: INPUT N$2570  PRINT "   ON FLOPPY '1' OR '2' ";: INPUT F$2580  PRINT D$;"OPEN";N$;",D";F$2590  PRINT D$;"READ";N$2600  INPUT SF: REM   SONAR FREQ2610  INPUT SS: REM   SOUND SPEED2620  INPUT RT: REM   RAD TRNSDUCER2630  INPUT R1: REM   RANGES R1 ,R22640  INPUT R22650  INPUT MP: REM   NO OF PINGS2660  INPUT E0: REM   MAX RAW ECHO PROC AMP2670  INPUT DE: REM   DELTA E2680  INPUT MS: REM   NO AMP BINS2690  INPUT GS: REM   SONAR GAIN SET2700  INPUT SL: REM   SOURCE LEVEL2710  INPUT RL: REM   RCV TRNS LEVEL2720  INPUT TVG: REM   TVG 40 OR 202730  INPUT MR: REM   MAX TVG RANGE2740  INPUT G1: REM   GAIN AT 1 M2750  INPUT PG: REM   PROCESSOR GAIN2760  INPUT PV: REM   PROC VOLT CALIB2770  INPUT TR: REM   TAPE REC GAIN2780  FOR J = 0 TO MS - 12790  INPUT EF(J)2800  NEXT J2810  INPUT I2820  FOR J = 0 TO I - 12830  INPUT A$(J)2840  NEXT J2850  PRINT D$;"CLOSE";N$2860  PRINT N$;" READ"2870  REM 2880  GOTO 8302890  END 