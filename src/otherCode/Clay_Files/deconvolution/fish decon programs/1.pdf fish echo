100  PRINT "MAKE AND READ PDF FISH FILE": REM     'PDF FISH FILE 2/11/84''     7/23/83. MOD 2/11/84 CSC Mac version 1/1/92  PRINT "FOR SINGLE FISH SCATTERING"  DIM EF(2100),A$(50)  PRINT "VALUES OF SONAR SYSTEM PARAMETERS ARE IN PRGM,'WP' GIVES VALUES"  '  SONAR SYSTEM PARAMETERS: THESE ARE ESSENTIALLY FIXED SO ENTER IN PRGM.  '  SIMRAD 70 KHZ, EY-M A$(1) = "SIMRAD 70 HZ;EY - M": '   A$(1) PRINTS IN MAKE FILE I = 1: '  I IS TEXT INDEX SL = 111.5 :'  SOURCE LEVEL,DB'       RCV TRANSDUCER, RL=-2 DB AT RCV OUTPUT FOR MAX GAIN (GS=10) AND TVG AT FULL GAIN RE 1 VOLT/(1 MICRO BAR) RL =  - 2:GS = 10'    DATA FOR EY-M # 20039. GAIN DATA AT GAIN SET =10'    TVG DATA. 40 LOG(R). AT .0014S (1 M) GAIN=-1DB. AT .08 S (60 M) GAIN=70 DB'  TVG DATA. 20 LOG(R). AT .002 S GAIN=33 DB. AT .135 S GAIN=70 DB'  OR TVG "40 LOG(R)+2*A*R" A = .0025: '    ATTEN CONST A=.25 DB/100M :FRESH WATER'  TVG RANGE: 20 LOG(R), 3-100 M+-1DB'  TVG RANGE: 40 LOG(R), 3-60 M =-1DB MG = 70: '     MG IS THE MAXIMUM GAIN AT LIMIT OF TVG ACTION. MR = 60: '  MAX RANGE FOR TVG AT 40*LOG(R)'    USE TVG GAIN RANGE, G1=-40*LOG(R)+2*A*MR .RCV GAIN (SOUND PRESS TO VOLTS OUT)=RL+G1 DB AT 1 M. G1 =  - 40 * .4343 *  LOG (MR) - 2 * A * MR TVG = 40'  INSERT R LATER IN NEXT PRGM. SF = 70000&: '  SONAR FREQ SS = 1458: '   SOUND SPEED M/S  REM  TRANSDUCER 70-24-F RT = .052: '  RAD OF TRANSDUCER M'  BEAM ANGLE=11 DEG'  DIRECTIVITY INDEX=24 DB'  INTEGRATED BEAM PSI IS'  10 LOG(PSI)=-16.5 DB'  RAW SYSTEM CALIBRATION'    TAPE RECORDER:MARANTZ PMD360 (OR PMD340), GAIN MASTER:5,LEFT:5,RT:10 GIVES ON LEFT SIG (1983) OUT/IN=TR=.165'     TAPE RECORDER:MARANTZ PMD360 (OR PMD340), GAIN MASTER:5,LEFT:6,RT:10 GIVES ON LEFT SIG (1981) OUT/IN=TR=.233'  PROCESSER GAIN USUALLY PG=32'  E0 IS PEAK AMPLITUDE. DELTA E=1. AMPLITUDE STEPS MS=32.'  INDEX J REPRESENTS AVG AMPL IN RANGE J TO J+1. AMPL IS ABOUT J+.5'      ECHO PROCESSER CALIB: 31.5 IS 10 VOLTS. PV=10/EP  E0U = 31.5  EP = 31.5  DE = 1  MS = 32  '   PC=PV/(TR*PG) ,VOLTS'  SET TR ,PG, PV  TR = .233: REM  TR = 1: '   1981 .TR IS DIFFERENT IN LAKE MENDOTA 1981  PV = 10 / EP  PG = 32: '  SETTING FOR LARS DATA.  PRINT "AFTER DATA IS IN YOU CAN ENTER DESCRIPTION OF DATA. NO ',' OR ':'" '  ------ MENU-----------  690  PRINT " MENU"   PRINT " INPUT 'fn' TO ENTER FILE NAME"   PRINT "       'e' TO ENTER EF(J)"   PRINT "       'et' TO ENTER TEXT"   PRINT "       'ce' TO FIX ECHO DATA"   PRINT "       'r' TO ENTER RANGE AND NO PINGS"   PRINT "       'psp' TO PRINT SONAR PARAMETERS"   PRINT "       'fsp' TO FIX SONAR PARMETERS"   PRINT "       'pf' TO PRINT EF(J)"   PRINT "       'wf' TO WRITE FILE"   PRINT "       'rof' TO READ OLD FILE"   PRINT "       'q' TO QUIT"   PRINT "       'm' FOR MENU"830  PRINT "MENU" ;:INPUT Q$   '  ------ MENU CHOICES---    IF Q$ = "fn" THEN 1560   IF Q$ = "e" THEN 1600   IF Q$ = "et" THEN 2020   IF Q$ = "ce" THEN 1920   IF Q$ = "r" THEN 1430   IF Q$ = "psp" THEN 1030   IF Q$ = "fsp" THEN 1240   IF Q$ = "pf" THEN 1710   IF Q$ = "wf" THEN 2180   IF Q$ = "rof" THEN 2510   IF Q$ = "q" THEN 3000   IF Q$ = "m" THEN 690   GOTO 8301030  REM  ------ PRINT SONAR PARAMETERS   PRINT "SONAR PARAMETERS"   PRINT " SIMRAD EY-M"   PRINT "   FREQ =";SF   PRINT "   SOUND SPEED=";SS   PRINT "   TRANS RADIUS=";RT;" M"   PRINT "   SOURCE LEVEL'";SL;" DB, (1MU BAR AT 1 M)"   PRINT "   TRNSD-RCV AT FULL TVG=";RL;" DB"   PRINT "   RCV GAIN SET=";GS   PRINT "   TVG=";TVG;" LOG(R) DB"   PRINT "   TVG GAIN CHANGE AT 1 M="; INT (10 * G1 + .5) / 10;" DB"   PRINT "   RANGES,R1,R2 = ";R1;",";R2;"M"   PRINT "TOTAL NO. PINGS=";MP   PRINT "   PROCESSER GAIN=";PG   PRINT "   NUMB AMP STEPS=";MS   PRINT "   E0 =";E0U   PRINT "   DELTA E=";DE   PRINT "   TAPE REC.GAIN=";TR1230  GOTO 830 1240  '  ------FIX SONAR PARM--   PRINT "OLD FREQ=";SF;" NEW=";: INPUT SF   PRINT "OLD SOURCE LEV=";SL;" NEW=";: INPUT SL   PRINT "OLD RCV LEV=";RL;" NEW=";: INPUT RL   PRINT "OLD GAIN SET=";GS;" NEW=";: INPUT GS   PRINT "OLD G1=";G1;" NEW=";: INPUT G1   PRINT "OLD TVG =";TVG;" NEW=";: INPUT TVG   PRINT "OLD TAPE REC GAIN=";TR;" NEW=";: INPUT TR   PRINT "OLD PROC GAIN=";PG;" NEW=";: INPUT PG   PRINT "OLD NUMB AMP STEPS=";MS;" NEW=";: INPUT MS   PRINT "OLD E0=";E0;" NEW=";: INPUT E0   PRINT "OLD SOUND SPEED=";SS;" NEW=";: INPUT SS   PRINT "OLD R1,R2=";R1;" ,";R2;" NEW=";: INPUT R1,R2   PRINT "OLD TRANS RADIUS=";RT;"  INPUT NEW=";: INPUT RT   PRINT "OLD NO PINGS=";MP;"  INPUT NEW=";: INPUT MP      GOTO 8301430  '   ------ ENTER R1,R2 ----   PRINT "ENTER R1,R2=";: INPUT R1,R2   PRINT "ENTER NO PINGS=";: INPUT MP   GOTO 830 ' ------- ENTER FILE NAME 1560  PRINT "FILE NAME";: INPUT N$    A$(0) = N$    GOTO 8301600  REM  ------ ENTER EF(J) --- PRINT   PRINT "J=0 IS SMALLEST AMPLITUDE"  PRINT "J=";MS - 1;" IS LARGEST AMPLITUDE"  PRINT    FOR J = 0 TO MS - 1      PRINT J;: INPUT EF(J)  NEXT J    PRINT "INPUT TOTAL NO. PINGS=";: INPUT MP  GOTO 830 1710  '  ------ PRINT FILE ENTRY A$'        ------  AND EF(J)    FOR J = 0 TO I       PRINT A$(J)   NEXT J      PRINT "R1,R2=";R1;",";R2;" NO PINGS=";MP   PRINT "J"; TAB( 5);"EF(J)"; TAB( 13);"J"; TAB( 19);"EF(J)"    M =  INT (MS / 2 - 1 + .5)       FOR J = 0 TO M      PRINT J; TAB( 5);EF(J); TAB( 13);M + 1 + J; TAB( 19);EF(M + 1 + J)   NEXT J      GOTO 830 1920 '  ------ CORRECT EF(J)--     PRINT "FIX ENTRY J=";: INPUT J   PRINT "PRESENT EF(";J;") =";EF(J)   PRINT "NEW EF(";J;")=";: INPUT EF(J)  '  NEW MP  MP = 0     FOR J = 0 TO MS - 1      MP = MP + EF(J)   NEXT J      GOTO 8302020  REM  ------ MAKE TEXT ------     I = 1: '  RESET I TO REENTER TEXT   PRINT "TYPE ONE STRING AT A TIME-NO',' OR ':'"   PRINT "PRESS RETURN ONCE TO END A STRING,TWICE TO QUIT."2090   I = I + 1   PRINT "I=";I;": ";   INPUT "";A$(I)   IF A$(I) <  > "" GOTO 2090     GOTO 830 2180  REM  ------- WRITE FILE---   PRINT "OLD NAME =";N$  PRINT "NEW FILE=";: INPUT NN$ '  WRITE THE FILE   PRINT "WRITE FILE"OPEN NN$ FOR OUTPUT AS #2 WRITE #2, SF: REM  SONAR FREQWRITE #2, SS: REM  SOUND SPEEDWRITE #2, RT: REM  RAD TRNSDUCERWRITE #2, R1: REM  RANGES R1 ,R2WRITE #2, R2WRITE #2, MP: REM  NO OF PINGSWRITE #2, E0U: REM  MAX RAW ECHO PROC AMPWRITE #2, DE: REM  DELTA EWRITE #2, MS: REM  NO AMP BINSWRITE #2, GS: REM  SONAR GAIN SETWRITE #2, SL: REM  SOURCE LEVELWRITE #2, RL: REM  RCV TRNS LEVELWRITE #2, TVG: REM  TVG 40 OR 20WRITE #2, MR: REM  MAX TVG RANGEWRITE #2, G1: REM  GAIN AT 1 MWRITE #2, PG: REM  PROCESSOR GAINWRITE #2, PV: REM  PROC VOLT CALIBWRITE #2, TR: REM  TAPE REC GAINFOR J = 0 TO MS - 1    WRITE #2, EF(J)NEXT JWRITE #2, IFOR J = 0 TO I - 1    WRITE #2, A$(J)NEXT JCLOSE #22500  GOTO 8302510  REM  --- READ OLD FISH ECHO FILE2560  PRINT " READ FILE NAMED";: INPUT N1$  OPEN N1$ FOR INPUT AS #1  INPUT #1, SF: REM   SONAR FREQINPUT #1, SS: REM   SOUND SPEEDINPUT #1, RT: REM   RAD TRNSDUCERINPUT #1, R1: REM   RANGES R1 ,R2INPUT #1, R2INPUT #1, MP: REM   NO OF PINGSINPUT #1, E0: REM   MAX RAW ECHO PROC AMPINPUT #1, DE: REM   DELTA EINPUT #1, MS: REM   NO AMP BINSINPUT #1, GS: REM   SONAR GAIN SETINPUT #1, SL: REM   SOURCE LEVELINPUT #1, RL: REM   RCV TRNS LEVELINPUT #1, TVG: REM   TVG 40 OR 20INPUT #1, MR: REM   MAX TVG RANGEINPUT #1, G1: REM   GAIN AT 1 MINPUT #1, PG: REM   PROCESSOR GAININPUT #1, PV: REM   PROC VOLT CALIBINPUT #1, TR: REM   TAPE REC GAIN   FOR J = 0 TO MS - 1     INPUT #1, EF(J)  NEXT J  INPUT #1, I  FOR J = 0 TO I - 1     INPUT #1, A$(J)  NEXT J     CLOSE #1    GOTO 8303000  END 